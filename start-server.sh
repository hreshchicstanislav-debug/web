#!/bin/bash

# –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: 
#   ./start-server.sh           - –∑–∞–ø—É—Å–∫ –Ω–∞ –ø–æ—Ä—Ç—É 8000 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
#   ./start-server.sh 4173     - –∑–∞–ø—É—Å–∫ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É
#   PORT=4173 ./start-server.sh - –∑–∞–ø—É—Å–∫ –Ω–∞ –ø–æ—Ä—Ç—É –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ—Ä—Ç: —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç, –ø–æ—Ç–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è, –ø–æ—Ç–æ–º –¥–µ—Ñ–æ–ª—Ç
if [ -n "$1" ]; then
    PORT=$1
elif [ -n "$PORT" ]; then
    PORT=$PORT
else
    PORT=8000
fi

echo "üöÄ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ Timetrack..."
echo "üì± –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:$PORT"
echo "üì± –î–ª—è iOS-—Å–∏–º—É–ª—è—Ç–æ—Ä–∞: http://localhost:$PORT"
echo "üîå –ü–æ—Ä—Ç: $PORT"
echo ""
echo "üí° –î–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: ./start-server.sh <–ø–æ—Ä—Ç>"
echo "   –ù–∞–ø—Ä–∏–º–µ—Ä: ./start-server.sh 4173"
echo ""
echo "–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Python3
if command -v python3 &> /dev/null; then
    echo "‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Python3 HTTP —Å–µ—Ä–≤–µ—Ä"
    python3 -m http.server $PORT
elif command -v node &> /dev/null; then
    echo "‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Node.js http-server"
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ http-server
    if command -v npx &> /dev/null; then
        npx --yes http-server -p $PORT -c-1
    else
        echo "‚ùå –û—à–∏–±–∫–∞: npx –Ω–µ –Ω–∞–π–¥–µ–Ω"
        exit 1
    fi
else
    echo "‚ùå –û—à–∏–±–∫–∞: –Ω–µ –Ω–∞–π–¥–µ–Ω Python3 –∏–ª–∏ Node.js"
    exit 1
fi

