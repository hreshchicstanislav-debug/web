# TimeTrack - Система учета рабочего времени

Веб-приложение для учета рабочего времени с хранением данных в Supabase.

## Настройка Supabase

### 1. Создайте проект в Supabase

1. Зайдите на [supabase.com](https://supabase.com)
2. Создайте новый проект
3. Дождитесь завершения создания проекта

### 2. Создайте таблицу

1. В вашем проекте Supabase перейдите в **SQL Editor**
2. Откройте файл `supabase_setup.sql` из этого проекта
3. Скопируйте содержимое и выполните SQL скрипт
4. Таблица `time_tracks` будет создана

### 3. Получите ключи API

1. В Supabase Dashboard перейдите в **Settings** → **API**
2. Скопируйте:
   - **Project URL** (например: `https://xxxxx.supabase.co`)
   - **anon public key** (длинная строка)

### 4. Настройте приложение

1. Откройте файл `app.js`
2. Найдите строки в начале файла:
   ```javascript
   const SUPABASE_URL = 'YOUR_SUPABASE_URL';
   const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY';
   ```
3. Замените `YOUR_SUPABASE_URL` на ваш Project URL
4. Замените `YOUR_SUPABASE_ANON_KEY` на ваш anon public key

### 5. Настройка безопасности (опционально)

По умолчанию таблица будет доступна всем. Если хотите ограничить доступ:

1. В Supabase Dashboard перейдите в **Authentication** → **Policies**
2. Создайте политики для таблицы `time_tracks`
3. Или отключите RLS (Row Level Security) в SQL Editor:
   ```sql
   ALTER TABLE time_tracks DISABLE ROW LEVEL SECURITY;
   ```

## Использование

1. Откройте `index.html` в браузере
2. Введите план рабочего дня (начало и конец)
3. Введите факт прихода и ухода
4. Добавляйте отлучки при необходимости
5. Система автоматически рассчитает баланс дня и общий итог с учетом предыдущих дней

## Функции

- ✅ Хранение всех отчетов в Supabase
- ✅ Автоматический расчет переработки/недоработки
- ✅ Перенос баланса с предыдущего дня
- ✅ История за все дни (не ограничена неделей)
- ✅ Зеленые галочки при сохранении времени
- ✅ Просмотр недели с балансами

## Структура данных

Таблица `time_tracks` содержит:
- `date` - дата (PRIMARY KEY)
- `plan_start` - план начала работы
- `plan_end` - план окончания работы
- `in_time` - факт прихода
- `out_time` - факт ухода
- `breaks_json` - JSON массив отлучек
- `comment` - комментарий
- `day_balance_min` - баланс дня в минутах
- `carry_new_min` - общий итог с учетом предыдущих дней
- `created_at` - дата создания записи
- `updated_at` - дата обновления записи

