#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ Timetrack –Ω–∞ –ø–æ—Ä—Ç—É 4173
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./start-server-timetrack.sh
# 
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 4173, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
# —Å dev-—Å–µ—Ä–≤–µ—Ä–æ–º –ø—Ä–æ–µ–∫—Ç–∞ galleries-app (–∫–æ—Ç–æ—Ä—ã–π –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 3000 –∏–ª–∏ 8000)

PORT=4173

echo "üöÄ –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ Timetrack –Ω–∞ –ø–æ—Ä—Ç—É $PORT..."
echo "üì± –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:$PORT"
echo "üì± –î–ª—è iOS-—Å–∏–º—É–ª—è—Ç–æ—Ä–∞: http://localhost:$PORT"
echo "üîå –ü–æ—Ä—Ç: $PORT (–≤—ã–±—Ä–∞–Ω –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å galleries-app)"
echo ""
echo "–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Python3
if command -v python3 &> /dev/null; then
    echo "‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Python3 HTTP —Å–µ—Ä–≤–µ—Ä"
    python3 -m http.server $PORT
elif command -v node &> /dev/null; then
    echo "‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Node.js http-server"
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ http-server
    if command -v npx &> /dev/null; then
        npx --yes http-server -p $PORT -c-1
    else
        echo "‚ùå –û—à–∏–±–∫–∞: npx –Ω–µ –Ω–∞–π–¥–µ–Ω"
        exit 1
    fi
else
    echo "‚ùå –û—à–∏–±–∫–∞: –Ω–µ –Ω–∞–π–¥–µ–Ω Python3 –∏–ª–∏ Node.js"
    exit 1
fi

